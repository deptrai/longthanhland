# Product Requirements Document (PRD)
# Public Marketplace Module - AI-Powered Real Estate Intelligence Platform

**Version**: 1.0
**Date**: 25/12/2025
**Product Manager**: John
**Status**: Draft for Review
**Project**: Twenty CRM - Real Estate Platform Extension

---

## ğŸ“‹ Document Information

| Field | Value |
|-------|-------|
| **Product Name** | Public Marketplace Module |
| **Product Type** | Web Application (SaaS B2B + B2C Hybrid) |
| **Domain** | Real Estate - Long ThÃ nh, Äá»“ng Nai |
| **Complexity Level** | HIGH |
| **Target Launch** | Q2 2026 (6 months after internal CRM stable) |
| **Project Track** | Enterprise Method |

---

## ğŸ¯ Executive Summary

### Product Vision

**"AI-Powered Real Estate Intelligence Platform That Generates Unlimited Quality Leads Through Trust & Automation"**

Public Marketplace Module transforms the existing internal CRM into a **dual-purpose platform** that serves both internal sales agents and external public users, powered by **AI-driven verification and insights** to build trust and generate high-quality leads.

### The Magic Moment ğŸŒŸ

**For Buyers/Renters**:
> "TÃ´i vá»«a tÃ¬m tháº¥y property hoÃ n háº£o, vÃ  AI Ä‘Ã£ verify giÃ¡ tá»« 5 sources khÃ¡c, show neighborhood insights, vÃ  warn tÃ´i vá» potential scams. TÃ´i tin tÆ°á»Ÿng 100%!"

**For Sellers/Brokers**:
> "Listing cá»§a tÃ´i Ä‘Æ°á»£c AI research vÃ  verify tá»± Ä‘á»™ng, tÄƒng trust, vÃ  tÃ´i nháº­n Ä‘Æ°á»£c qualified leads tá»« platform nÃ y nhiá»u hÆ¡n batdongsan.com.vn 3 láº§n!"

**For Company (MÃ´i Giá»›i)**:
> "ChÃºng tÃ´i cÃ³ nguá»“n leads vÃ´ háº¡n tá»« public marketplace, AI filter spam tá»± Ä‘á»™ng, vÃ  conversion rate cao hÆ¡n vÃ¬ leads Ä‘Ã£ Ä‘Æ°á»£c qualify bá»Ÿi AI!"

### Strategic Intent

**Primary Goal**: Generate unlimited quality leads for internal brokerage team

**Secondary Goals**:
1. Build trust through AI-powered verification
2. Differentiate from batdongsan.com.vn vá»›i AI features
3. Establish Long ThÃ nh market leadership
4. Create sustainable revenue stream

---

## ğŸ¨ Product Magic Essence

### What Makes This Special

**1. AI Research Agent** ğŸ¤–
- Má»—i listing Ä‘Æ°á»£c AI tá»± Ä‘á»™ng research tá»« multiple sources:
  - batdongsan.com.vn
  - chottot.vn
  - Facebook marketplace
  - Zalo groups
  - Google search
- Cross-reference prices, verify authenticity
- Detect scams vÃ  fake listings
- Generate trust score

**2. AI Summary & Insights** ğŸ“Š
- Instant property analysis
- Neighborhood insights
- Price trend analysis
- Investment potential score
- Comparable properties

**3. Smart Spam Filter** ğŸ›¡ï¸
- AI-powered spam detection
- Duplicate listing detection
- Fake price detection
- Scam pattern recognition

**4. AI Consultation** ğŸ’¬
- 24/7 chatbot tÆ° váº¥n
- Answer property questions
- Recommend similar properties
- Guide through buying process

### Differentiation vs batdongsan.com.vn

| Feature | batdongsan.com.vn | Our Platform |
|---------|-------------------|--------------|
| **Verification** | Manual (limited) | AI-powered (comprehensive) |
| **Research** | None | AI research tá»« multiple sources |
| **Spam Filter** | Basic | AI-powered advanced detection |
| **Consultation** | None | AI chatbot 24/7 |
| **Trust Score** | None | AI-generated trust score |
| **Price Verification** | None | Cross-reference 5+ sources |
| **Lead Quality** | Mixed | AI-qualified leads |
| **Focus** | Nationwide | Long ThÃ nh (deep expertise) |

---

## ğŸ¯ Success Criteria

### North Star Metric

**Qualified Leads Generated per Month**

Target:
- Month 3: 50 qualified leads/month
- Month 6: 200 qualified leads/month
- Month 12: 500 qualified leads/month

**Definition**: Qualified lead = inquiry vá»›i verified contact info + AI trust score >70%

### Primary Success Metrics

#### 1. Lead Generation (MOST IMPORTANT)

| Metric | Month 3 | Month 6 | Month 12 |
|--------|---------|---------|----------|
| Total Inquiries | 150 | 600 | 1,500 |
| Qualified Leads | 50 | 200 | 500 |
| Lead Conversion Rate | 10% | 12% | 15% |
| Leads â†’ Deals | 5 | 24 | 75 |

**Success = 500 qualified leads/month by Month 12**

#### 2. User Acquisition

| Metric | Month 3 | Month 6 | Month 12 |
|--------|---------|---------|----------|
| Registered Users | 200 | 1,000 | 5,000 |
| Active Listings | 500 | 2,000 | 8,000 |
| Daily Active Users | 40 | 200 | 1,000 |

**Success = 5,000 registered users by Year 1**

#### 3. AI Performance

| Metric | Target |
|--------|--------|
| AI Verification Accuracy | >90% |
| Spam Detection Rate | >95% |
| AI Response Time | <2s |
| Trust Score Accuracy | >85% |

#### 4. Financial

| Metric | Year 1 | Year 2 |
|--------|--------|--------|
| Revenue | 3.3B VNÄ | 16.4B VNÄ |
| Lead Commission | 3B VNÄ | 15B VNÄ |
| Subscriptions | 257M VNÄ | 1.28B VNÄ |
| Break-even | Month 8-10 | âœ… |

**Success = Break-even trong Year 1**

### Secondary Success Metrics

- User satisfaction: >4.2/5
- Listing approval rate: >85%
- Average response time: <24h
- Platform uptime: >99.5%
- Mobile traffic: >60%

---

## ğŸ‘¥ User Personas

### Primary Personas

#### 1. Nguyá»…n VÄƒn A - Individual Property Owner (Seller)

**Demographics**:
- Age: 35-55
- Location: Long ThÃ nh, Äá»“ng Nai
- Income: 20-50M VNÄ/month
- Tech savvy: Medium

**Goals**:
- BÃ¡n property nhanh vá»›i giÃ¡ tá»‘t
- TrÃ¡nh bá»‹ scam
- Tiáº¿p cáº­n nhiá»u buyers
- KhÃ´ng muá»‘n tráº£ phÃ­ cao

**Pain Points**:
- KhÃ´ng biáº¿t giÃ¡ thá»‹ trÆ°á»ng
- Sá»£ bá»‹ lá»«a Ä‘áº£o
- KhÃ³ verify buyers
- PhÃ­ mÃ´i giá»›i cao (3-5%)

**How We Help**:
- AI verify giÃ¡ thá»‹ trÆ°á»ng
- Trust score cho buyers
- Free tier Ä‘á»ƒ post listing
- Qualified leads tá»« platform

---

#### 2. Tráº§n Thá»‹ B - Property Buyer/Investor

**Demographics**:
- Age: 28-45
- Location: HCMC, muá»‘n mua Ä‘áº¥t Long ThÃ nh
- Income: 30-100M VNÄ/month
- Tech savvy: High

**Goals**:
- TÃ¬m property tá»‘t vá»›i giÃ¡ há»£p lÃ½
- Verify thÃ´ng tin trÆ°á»›c khi mua
- Hiá»ƒu vá» neighborhood
- Investment potential

**Pain Points**:
- KhÃ´ng tin listings trÃªn máº¡ng
- GiÃ¡ áº£o, property áº£o nhiá»u
- Thiáº¿u thÃ´ng tin vá» khu vá»±c
- KhÃ³ so sÃ¡nh properties

**How We Help**:
- AI verify listings tá»« multiple sources
- Trust score cho má»—i listing
- Neighborhood insights
- Price comparison tools
- AI consultation 24/7

---

#### 3. LÃª VÄƒn C - Small Broker

**Demographics**:
- Age: 25-40
- Location: Long ThÃ nh
- Listings: 5-20 properties
- Income: 15-40M VNÄ/month

**Goals**:
- TÄƒng sá»‘ lÆ°á»£ng listings
- Tiáº¿p cáº­n nhiá»u buyers
- Professional tools
- Competitive pricing

**Pain Points**:
- KhÃ´ng Ä‘á»§ tiá»n cho batdongsan.com.vn Pro
- Thiáº¿u tools Ä‘á»ƒ manage listings
- KhÃ³ compete vá»›i brokers lá»›n
- Spam vÃ  fake listings lÃ m giáº£m trust

**How We Help**:
- Affordable Pro tier (299k/month)
- Professional CRM tools
- AI verification tÄƒng trust
- Spam filter giá»¯ platform clean

---

#### 4. Internal Sales Agent (Secondary)

**Demographics**:
- Age: 22-35
- Company employee
- Manage 50-100 properties
- Tech savvy: High

**Goals**:
- Convert public leads thÃ nh deals
- Track commissions
- Manage customer relationships
- Hit sales targets

**Pain Points**:
- Low-quality leads
- Manual lead qualification
- Tracking leads tá»« multiple sources
- Commission calculation

**How We Help**:
- AI-qualified leads
- Seamless lead conversion workflow
- Integrated CRM
- Automated commission tracking

---

## ğŸ“ Architecture Overview

### High-Level Architecture

**REVISED APPROACH: Single Frontend vá»›i RBAC** âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Twenty CRM Frontend (React)             â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Public Views â”‚         â”‚ Internal Views  â”‚ â”‚
â”‚  â”‚ (RBAC)       â”‚         â”‚ (Existing)      â”‚ â”‚
â”‚  â”‚              â”‚         â”‚                 â”‚ â”‚
â”‚  â”‚ - Browse     â”‚         â”‚ - Full CRM      â”‚ â”‚
â”‚  â”‚ - Search     â”‚         â”‚ - Deals         â”‚ â”‚
â”‚  â”‚ - Post       â”‚         â”‚ - Commissions   â”‚ â”‚
â”‚  â”‚ - Inquire    â”‚         â”‚ - Analytics     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Twenty CRM Backend (NestJS + GraphQL)      â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  New Services (Public Marketplace)       â”‚  â”‚
â”‚  â”‚  - PublicListingService                  â”‚  â”‚
â”‚  â”‚  - AIResearchService â­                  â”‚  â”‚
â”‚  â”‚  - AIVerificationService â­              â”‚  â”‚
â”‚  â”‚  - SpamFilterService â­                  â”‚  â”‚
â”‚  â”‚  - InquiryService                        â”‚  â”‚
â”‚  â”‚  - TrustScoreService â­                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Existing Services                       â”‚  â”‚
â”‚  â”‚  - PropertyService                       â”‚  â”‚
â”‚  â”‚  - ProjectService                        â”‚  â”‚
â”‚  â”‚  - DealService                           â”‚  â”‚
â”‚  â”‚  - CommissionService                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  External AI Services                           â”‚
â”‚  - OpenAI GPT-4 (Summary, Consultation)        â”‚
â”‚  - Web Scraping (batdongsan, chá»£ tá»‘t, FB)      â”‚
â”‚  - Price Analysis Engine                        â”‚
â”‚  - Spam Detection ML Model                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Architecture Decisions

**Decision 1: Single Frontend vs Dual Frontend**

**Choice**: Single Frontend vá»›i RBAC âœ…

**Rationale**:
- Twenty CRM Ä‘Ã£ cÃ³ robust RBAC system
- Shared components â†’ faster development
- Consistent UX across user types
- Easier maintenance
- Lower complexity

**Trade-offs**:
- Need careful permission design
- Potential UI complexity for different roles
- But: Benefits outweigh costs significantly

---

**Decision 2: AI Integration Approach**

**Choice**: External AI Services + Internal ML Models

**Rationale**:
- OpenAI GPT-4 for summary & consultation (proven, reliable)
- Custom ML models for spam detection (domain-specific)
- Web scraping for price verification (real-time data)
- Hybrid approach balances cost, performance, accuracy

---

**Decision 3: Data Model**

**Choice**: Extend existing entities + Add new entities

New Entities:
- `PublicUser` (external users)
- `PublicListing` (public listings)
- `Inquiry` (buyer-seller communication)
- `TrustScore` (AI-generated scores)
- `AIResearchResult` (research data)

Extended Entities:
- `Property` (add `publiclyVisible` flag)
- `User` (add `userType` field)

---

## ğŸ¯ Scope Definition

### MVP Scope (Phase 1: Month 1-3)

**Must Have** âœ…:

1. **Core Marketplace**
   - Public user registration & login
   - Browse listings (no auth required)
   - Search & filter (location, price, type)
   - Post listings (free tier: 3 listings)
   - Send inquiries
   - Save favorite listings

2. **AI Features** â­
   - AI Research Agent (verify tá»« 3 sources minimum)
   - AI Summary (property + neighborhood)
   - Basic spam filter (duplicate detection)
   - Trust score calculation

3. **Admin Features**
   - Manual listing approval
   - User management
   - Basic analytics dashboard

4. **Integration**
   - Lead conversion workflow (public â†’ internal)
   - Commission tracking for converted leads

**Nice to Have** (defer to Phase 2):
- AI Consultation chatbot
- Advanced spam detection
- Mobile app
- Map view
- Price history

---

### Growth Features (Phase 2: Month 4-6)

1. **Enhanced AI**
   - AI Consultation chatbot 24/7
   - Advanced spam detection (ML model)
   - Research tá»« 5+ sources
   - Price trend prediction

2. **Monetization**
   - Subscription tiers (Basic, Pro, Enterprise)
   - Featured listings
   - Payment integration (VNPay, MoMo)

3. **User Experience**
   - Seller dashboard vá»›i analytics
   - Email/SMS notifications
   - Saved searches
   - Comparison tool

4. **Platform**
   - Mobile-responsive improvements
   - Performance optimization
   - SEO optimization

---

### Vision Features (Phase 3: Month 7-12)

1. **Advanced Features**
   - Mobile apps (iOS/Android)
   - Interactive map view
   - Virtual tours (360Â° photos)
   - Price history charts
   - Market reports

2. **AI Evolution**
   - Predictive analytics
   - Investment recommendations
   - Automated property valuation
   - Sentiment analysis

3. **Ecosystem**
   - API for third-party integrations
   - Developer platform
   - Partner network
   - Affiliate program

---

## ğŸ“‹ Functional Requirements

### FR-1: User Management

#### FR-1.1: Public User Registration

**Priority**: MUST HAVE
**User Story**: As a public user, I want to register an account so that I can post listings and save favorites.

**Requirements**:
1. Registration form vá»›i fields:
   - Email (required, unique)
   - Password (required, min 8 chars)
   - Phone (required, for verification)
   - Full name (required)
   - User type (Buyer/Seller/Broker)

2. Email verification:
   - Send verification email
   - User must verify within 24h
   - Resend option available

3. Phone verification:
   - Send SMS code
   - User enters code
   - Max 3 attempts

4. Account creation:
   - Create PublicUser entity
   - Assign default role (Public User)
   - Set subscription tier = FREE
   - Send welcome email

**Acceptance Criteria**:
- âœ… User can register vá»›i valid email/phone
- âœ… Duplicate email rejected
- âœ… Verification email sent within 1 minute
- âœ… Phone verification works
- âœ… Account created successfully

---

#### FR-1.2: User Authentication

**Priority**: MUST HAVE
**User Story**: As a user, I want to login securely so that I can access my account.

**Requirements**:
1. Login methods:
   - Email + Password
   - Phone + OTP (future)
   - Social login (future: Google, Facebook)

2. Security:
   - JWT token authentication
   - Separate token for public users
   - Token expiry: 7 days
   - Refresh token mechanism

3. Password reset:
   - Forgot password flow
   - Email reset link
   - Link expires in 1 hour

**Acceptance Criteria**:
- âœ… User can login vá»›i correct credentials
- âœ… Invalid credentials rejected
- âœ… JWT token generated
- âœ… Password reset works
- âœ… Session persists across page reloads

---

### FR-2: Listing Management

#### FR-2.1: Browse Listings (Public)

**Priority**: MUST HAVE
**User Story**: As a visitor, I want to browse listings without login so that I can explore properties.

**Requirements**:
1. Public listing page:
   - Display all approved listings
   - Grid/list view toggle
   - Pagination (20 per page)
   - Sort options (date, price, area)

2. Listing card shows:
   - Thumbnail image
   - Title
   - Price
   - Area (mÂ²)
   - Location (district)
   - Trust score badge â­
   - Verified badge (if verified)

3. No authentication required
4. SEO-friendly URLs

**Acceptance Criteria**:
- âœ… Listings load without login
- âœ… Pagination works
- âœ… Sort works correctly
- âœ… Trust score displayed
- âœ… Page loads <2s

---

#### FR-2.2: Search & Filter

**Priority**: MUST HAVE
**User Story**: As a buyer, I want to search and filter listings so that I can find properties matching my criteria.

**Requirements**:
1. Search bar:
   - Keyword search (title, description, location)
   - Auto-suggest locations
   - Search history (logged in users)

2. Filter panel:
   - **Location**: Province, District, Ward
   - **Type**: Apartment, House, Land, Villa, etc.
   - **Price**: Min-Max range
   - **Area**: Min-Max range (mÂ²)
   - **Bedrooms**: 1, 2, 3, 4, 5+
   - **Verified only**: Toggle
   - **Trust score**: Min threshold

3. Filter behavior:
   - Multiple filters combine vá»›i AND logic
   - Real-time results update
   - Filter count badges
   - Clear all filters button

4. Save search (logged in):
   - Save filter combination
   - Name saved search
   - Get notifications for new matches

**Acceptance Criteria**:
- âœ… Search returns relevant results
- âœ… Filters work correctly
- âœ… Multiple filters combine properly
- âœ… Results update in real-time
- âœ… Saved searches work (logged in)

---

#### FR-2.3: Post Listing

**Priority**: MUST HAVE
**User Story**: As a seller, I want to post my property listing so that buyers can find it.

**Requirements**:
1. Listing form (multi-step):

   **Step 1: Basic Info**
   - Title (required, max 100 chars)
   - Description (required, rich text, max 2000 chars)
   - Listing type (Sale/Rent)
   - Property type (Apartment/House/Land/etc.)

   **Step 2: Details**
   - Price (required, VNÄ)
   - Area (required, mÂ²)
   - Bedrooms (optional)
   - Bathrooms (optional)
   - Floor (optional)
   - Orientation (optional)

   **Step 3: Location**
   - Province (required)
   - District (required)
   - Ward (optional)
   - Street address (required)
   - Map picker (optional)

   **Step 4: Photos**
   - Upload photos (min 3, max based on tier)
   - Drag-and-drop reorder
   - Set cover photo
   - Auto-compress images

   **Step 5: Legal**
   - Legal document type (Red book, etc.)
   - Document number (optional)
   - Ownership status

2. Free tier limits:
   - Max 3 active listings
   - Max 5 photos per listing
   - 30-day expiry

3. Draft functionality:
   - Save as draft
   - Resume later
   - Auto-save every 30s

4. Submission:
   - Submit for review
   - Status = PENDING_REVIEW
   - Notification sent to admin
   - Email confirmation to user

**Acceptance Criteria**:
- âœ… User can complete all steps
- âœ… Form validation works
- âœ… Photos upload successfully
- âœ… Draft save/resume works
- âœ… Submission triggers review workflow

---

#### FR-2.4: Listing Detail Page

**Priority**: MUST HAVE
**User Story**: As a buyer, I want to view detailed listing information so that I can make informed decisions.

**Requirements**:
1. **Header Section**:
   - Photo gallery (lightbox)
   - Title
   - Price (prominent)
   - Trust score badge â­
   - Verified badge
   - Share buttons
   - Save to favorites (logged in)

2. **Property Details**:
   - All listing information
   - Formatted nicely
   - Icons for key features

3. **AI Summary Section** â­:
   - AI-generated property summary
   - Neighborhood insights
   - Price analysis
   - Investment potential
   - Pros & cons
   - "Powered by AI" badge

4. **Trust Score Details** â­:
   - Overall trust score (0-100)
   - Score breakdown:
     - Price verification (weight: 30%)
     - Seller reputation (weight: 25%)
     - Listing completeness (weight: 20%)
     - AI research confidence (weight: 25%)
   - Sources checked (list)
   - Last verified date

5. **AI Research Results** â­:
   - Similar listings found
   - Price comparison table
   - Sources (batdongsan, chá»£ tá»‘t, etc.)
   - Confidence level

6. **Location**:
   - Map vá»›i marker
   - Nearby amenities
   - Distance to key locations

7. **Seller Info**:
   - Name (masked: "Nguyá»…n V***")
   - User type (Individual/Broker)
   - Member since
   - Total listings
   - Response rate
   - Contact button

8. **Similar Listings**:
   - 4-6 similar properties
   - Based on location, price, type

9. **Inquiry Form**:
   - Quick contact form
   - Message field
   - Phone number
   - Email (optional)
   - "Send Inquiry" button

**Acceptance Criteria**:
- âœ… All sections display correctly
- âœ… AI summary generated
- âœ… Trust score calculated
- âœ… Map shows correct location
- âœ… Similar listings relevant
- âœ… Inquiry form works

---

### FR-3: AI-Powered Features â­

#### FR-3.1: AI Research Agent

**Priority**: MUST HAVE (MVP)
**User Story**: As a platform, I want to automatically research each listing from multiple sources so that I can verify authenticity and build trust.

**Requirements**:
1. **Trigger**: When listing submitted for review
2. **Research Sources** (MVP: 3 minimum):
   - batdongsan.com.vn
   - chottot.vn
   - Facebook marketplace (if accessible)
   - Google search
   - Zalo groups (future)

3. **Research Process**:
   - Extract key info (address, price, area, type)
   - Search each source for similar listings
   - Compare prices (Â±20% range)
   - Check for duplicates
   - Verify seller information
   - Calculate confidence score

4. **Output**:
   - AIResearchResult entity created
   - Similar listings found (list)
   - Price range from sources
   - Duplicate detection flag
   - Confidence score (0-100)
   - Sources checked (list)
   - Timestamp

5. **Performance**:
   - Complete within 2 minutes
   - Retry on failure (max 3 attempts)
   - Queue-based processing (BullMQ)

**Acceptance Criteria**:
- âœ… Research triggered automatically
- âœ… At least 3 sources checked
- âœ… Similar listings found (if exist)
- âœ… Price comparison accurate
- âœ… Results stored in database
- âœ… Completes within 2 minutes

---

#### FR-3.2: AI Summary Generation

**Priority**: MUST HAVE (MVP)
**User Story**: As a buyer, I want to see AI-generated summary and insights so that I can quickly understand the property value.

**Requirements**:
1. **Trigger**: After AI research completes
2. **Input Data**:
   - Listing details
   - AI research results
   - Neighborhood data
   - Price history (if available)

3. **AI Model**: OpenAI GPT-4

4. **Summary Sections**:

   **Property Overview** (100-150 words):
   - Key highlights
   - Unique selling points
   - Suitable for whom

   **Neighborhood Insights** (100-150 words):
   - Area description
   - Nearby amenities
   - Transportation
   - Development plans

   **Price Analysis** (50-100 words):
   - Price vs market average
   - Value assessment
   - Price trend

   **Investment Potential** (50-100 words):
   - Growth potential
   - Rental yield (if applicable)
   - Risk factors

   **Pros & Cons**:
   - 3-5 pros
   - 2-3 cons

5. **Language**: Vietnamese
6. **Tone**: Professional, objective, helpful

**Acceptance Criteria**:
- âœ… Summary generated automatically
- âœ… All sections included
- âœ… Vietnamese language
- âœ… Factual and helpful
- âœ… Generated within 30 seconds

---

#### FR-3.3: Trust Score Calculation

**Priority**: MUST HAVE (MVP)
**User Story**: As a buyer, I want to see a trust score for each listing so that I can assess reliability.

**Requirements**:
1. **Trust Score Formula** (0-100):

   ```
   Trust Score =
     (Price Verification Ã— 0.30) +
     (Seller Reputation Ã— 0.25) +
     (Listing Completeness Ã— 0.20) +
     (AI Research Confidence Ã— 0.25)
   ```

2. **Component Calculations**:

   **Price Verification** (0-100):
   - Found in 3+ sources: 100 points
   - Found in 2 sources: 80 points
   - Found in 1 source: 60 points
   - Not found: 40 points
   - Price within Â±10% of market: +20 bonus
   - Price within Â±20% of market: +10 bonus

   **Seller Reputation** (0-100):
   - Verified phone/email: 40 points
   - Complete profile: 20 points
   - Response rate >80%: 20 points
   - Previous successful listings: 20 points

   **Listing Completeness** (0-100):
   - All required fields: 50 points
   - 5+ photos: 20 points
   - Detailed description (>200 words): 15 points
   - Legal documents: 15 points

   **AI Research Confidence** (0-100):
   - Direct from AI research confidence score

3. **Display**:
   - Score badge on listing card
   - Color coding:
     - 80-100: Green (Excellent)
     - 60-79: Yellow (Good)
     - 40-59: Orange (Fair)
     - 0-39: Red (Poor)
   - Detailed breakdown on listing detail page

4. **Update Frequency**:
   - Calculated on listing creation
   - Recalculated daily
   - Recalculated on seller profile update

**Acceptance Criteria**:
- âœ… Trust score calculated correctly
- âœ… All components weighted properly
- âœ… Score displayed on listings
- âœ… Color coding works
- âœ… Breakdown shows details

---

#### FR-3.4: Spam Filter

**Priority**: MUST HAVE (MVP)
**User Story**: As a platform, I want to automatically detect and filter spam listings so that I maintain quality.

**Requirements**:
1. **Detection Rules** (MVP - Rule-based):

   **Duplicate Detection**:
   - Same address + price + area â†’ Duplicate
   - Same photos (image hash) â†’ Duplicate
   - Same phone number + similar listing â†’ Duplicate

   **Fake Price Detection**:
   - Price >3x market average â†’ Flag
   - Price <0.5x market average â†’ Flag
   - Round numbers (1,000,000,000) â†’ Suspicious

   **Spam Patterns**:
   - Title all caps â†’ Flag
   - Excessive special characters â†’ Flag
   - Phone numbers in title/description â†’ Flag
   - External links in description â†’ Flag
   - Keywords: "liÃªn há»‡ ngay", "cÆ¡ há»™i vÃ ng" â†’ Suspicious

2. **Spam Score** (0-100):
   - 0-30: Clean
   - 31-60: Suspicious (manual review)
   - 61-100: Spam (auto-reject)

3. **Actions**:
   - Spam score >60: Auto-reject + notify user
   - Spam score 31-60: Flag for manual review
   - Spam score <30: Auto-approve (if other criteria met)

4. **Future Enhancement** (Phase 2):
   - ML-based spam detection
   - Learn from admin decisions
   - Pattern recognition

**Acceptance Criteria**:
- âœ… Duplicates detected accurately
- âœ… Fake prices flagged
- âœ… Spam patterns detected
- âœ… Spam score calculated
- âœ… Actions taken correctly

---

#### FR-3.5: AI Consultation Chatbot (Phase 2)

**Priority**: NICE TO HAVE (defer to Phase 2)
**User Story**: As a buyer, I want to ask questions about properties and get instant AI-powered answers.

**Requirements** (High-level):
1. Chatbot widget on listing detail page
2. Powered by OpenAI GPT-4
3. Context-aware (knows listing details)
4. Can answer:
   - Property questions
   - Neighborhood questions
   - Price questions
   - Legal questions (basic)
   - Financing questions (basic)
5. Escalate to human if needed
6. Conversation history saved

**Deferred to Phase 2**

---

### FR-4: Inquiry & Communication

#### FR-4.1: Send Inquiry

**Priority**: MUST HAVE
**User Story**: As a buyer, I want to contact the seller so that I can get more information or schedule a visit.

**Requirements**:
1. **Inquiry Form** (on listing detail page):
   - Message field (required, max 500 chars)
   - Contact phone (required)
   - Contact email (optional)
   - Preferred contact method (Phone/Email/Both)
   - "Send Inquiry" button

2. **Anonymous Inquiries**:
   - Allow inquiries without login
   - Capture contact info in form
   - Create temporary inquiry record

3. **Logged-in Inquiries**:
   - Pre-fill contact info from profile
   - Save to inquiry history
   - Track inquiry status

4. **Processing**:
   - Create Inquiry entity
   - Status = NEW
   - Increment listing.contactCount
   - Send notification to seller (email + SMS)
   - Send confirmation to buyer (email)
   - If internal property: Create lead in CRM

5. **Rate Limiting**:
   - Max 5 inquiries per hour per IP (anonymous)
   - Max 20 inquiries per day per user (logged in)

**Acceptance Criteria**:
- âœ… Form validation works
- âœ… Inquiry created successfully
- âœ… Seller notified (email + SMS)
- âœ… Buyer receives confirmation
- âœ… Rate limiting works
- âœ… Internal lead created (if applicable)

---

#### FR-4.2: Manage Inquiries (Seller)

**Priority**: MUST HAVE
**User Story**: As a seller, I want to view and manage inquiries for my listings so that I can respond to potential buyers.

**Requirements**:
1. **Inquiry Dashboard**:
   - List all inquiries for my listings
   - Filter by: Listing, Status, Date
   - Sort by: Date, Status
   - Search by buyer name/phone

2. **Inquiry Card Shows**:
   - Buyer name (if logged in) or "Anonymous"
   - Contact phone
   - Contact email
   - Message
   - Listing title (link)
   - Date/time
   - Status badge
   - Action buttons

3. **Actions**:
   - Mark as Contacted
   - Mark as Closed
   - Add notes (private)
   - Call buyer (click-to-call)
   - Email buyer

4. **Notifications**:
   - Email for new inquiry
   - SMS for new inquiry (optional)
   - Daily digest (optional)

**Acceptance Criteria**:
- âœ… Dashboard displays inquiries
- âœ… Filters and sort work
- âœ… Actions work correctly
- âœ… Notifications sent
- âœ… Notes saved

---

### FR-5: Admin Features

#### FR-5.1: Listing Approval Workflow

**Priority**: MUST HAVE
**User Story**: As an admin, I want to review and approve/reject listings so that I maintain platform quality.

**Requirements**:
1. **Pending Listings Queue**:
   - List all listings vá»›i status = PENDING_REVIEW
   - Sort by: Date, Trust Score, Spam Score
   - Filter by: Type, Location, Spam Score
   - Batch actions (approve/reject multiple)

2. **Listing Review Page**:
   - Display all listing details
   - Show AI research results
   - Show trust score breakdown
   - Show spam score
   - Show similar listings
   - Admin notes field

3. **Actions**:
   - **Approve**:
     - Status â†’ APPROVED
     - Notify seller (email)
     - Listing goes live

   - **Reject**:
     - Status â†’ REJECTED
     - Reason required (dropdown + text)
     - Notify seller (email vá»›i reason)
     - Seller can edit and resubmit

   - **Request Changes**:
     - Status â†’ CHANGES_REQUESTED
     - Specify what to change
     - Notify seller
     - Seller edits and resubmits

4. **Auto-Approval** (optional):
   - If trust score >80 AND spam score <30
   - Auto-approve after 24h
   - Admin can still review

**Acceptance Criteria**:
- âœ… Queue displays pending listings
- âœ… Review page shows all info
- âœ… Approve action works
- âœ… Reject action works
- âœ… Notifications sent
- âœ… Auto-approval works (if enabled)

---

#### FR-5.2: User Management

**Priority**: MUST HAVE
**User Story**: As an admin, I want to manage users so that I can handle issues and maintain platform integrity.

**Requirements**:
1. **User List**:
   - All public users
   - Filter by: Type, Status, Subscription
   - Search by: Name, Email, Phone
   - Sort by: Date, Listings count

2. **User Detail Page**:
   - Profile information
   - Subscription tier
   - Listings (list)
   - Inquiries sent
   - Activity log
   - Trust metrics

3. **Actions**:
   - Verify user (manual)
   - Suspend user
   - Ban user
   - Reset password
   - Change subscription tier
   - Add admin notes

4. **Bulk Actions**:
   - Export users (CSV)
   - Send email to filtered users

**Acceptance Criteria**:
- âœ… User list displays correctly
- âœ… Filters and search work
- âœ… Actions work correctly
- âœ… Bulk actions work
- âœ… Activity logged

---

#### FR-5.3: Analytics Dashboard

**Priority**: MUST HAVE
**User Story**: As an admin, I want to see platform metrics so that I can track performance and make decisions.

**Requirements**:
1. **Key Metrics** (cards):
   - Total users
   - Active listings
   - Pending approvals
   - Inquiries today
   - Leads generated (qualified)
   - Revenue (current month)

2. **Charts**:
   - User growth (line chart)
   - Listings over time (line chart)
   - Inquiries per day (bar chart)
   - Lead conversion funnel
   - Revenue breakdown (pie chart)

3. **Tables**:
   - Top listings (by views)
   - Top sellers (by listings)
   - Recent inquiries
   - Recent approvals

4. **Filters**:
   - Date range
   - Location
   - User type

5. **Export**:
   - Export data to CSV
   - Generate PDF report

**Acceptance Criteria**:
- âœ… Metrics display correctly
- âœ… Charts render properly
- âœ… Data accurate
- âœ… Filters work
- âœ… Export works

---

### FR-6: Lead Conversion (Internal)

#### FR-6.1: Convert Public Inquiry to Internal Lead

**Priority**: MUST HAVE
**User Story**: As a sales agent, I want public inquiries to automatically become leads in my CRM so that I can follow up.

**Requirements**:
1. **Trigger**: When inquiry sent to internal property (publiclyVisible = true)

2. **Conversion Process**:
   - Create Contact entity (if not exists)
   - Create Deal entity
   - Link to Property
   - Assign to sales agent (round-robin or rules-based)
   - Status = NEW_LEAD
   - Source = PUBLIC_MARKETPLACE

3. **Data Mapping**:
   - Inquiry.message â†’ Deal.notes
   - Inquiry.contactPhone â†’ Contact.phone
   - Inquiry.contactEmail â†’ Contact.email
   - Listing â†’ Property

4. **Notification**:
   - Notify assigned sales agent (email + in-app)
   - Include inquiry details
   - Include AI summary of listing
   - Include trust score

5. **Tracking**:
   - Track conversion in analytics
   - Link inquiry to deal for reporting

**Acceptance Criteria**:
- âœ… Inquiry converts automatically
- âœ… Contact created/updated
- âœ… Deal created correctly
- âœ… Agent assigned
- âœ… Agent notified
- âœ… Data mapped correctly

---

#### FR-6.2: Lead Qualification

**Priority**: MUST HAVE
**User Story**: As a platform, I want to qualify leads automatically so that sales agents focus on high-quality leads.

**Requirements**:
1. **Qualification Criteria**:
   - Contact info verified (phone + email)
   - Inquiry message quality (>20 words)
   - Trust score of listing >60
   - Budget indication (if mentioned)
   - Timeline indication (if mentioned)

2. **Lead Score** (0-100):
   - Verified contact: 30 points
   - Quality message: 20 points
   - High trust listing: 20 points
   - Budget mentioned: 15 points
   - Timeline mentioned: 15 points

3. **Lead Quality Tiers**:
   - 80-100: HOT (immediate follow-up)
   - 60-79: WARM (follow-up within 24h)
   - 40-59: COLD (follow-up within 48h)
   - 0-39: UNQUALIFIED (low priority)

4. **Auto-Assignment**:
   - HOT leads â†’ Senior agents
   - WARM leads â†’ Regular agents
   - COLD leads â†’ Junior agents
   - UNQUALIFIED â†’ Auto-nurture campaign

**Acceptance Criteria**:
- âœ… Lead score calculated
- âœ… Quality tier assigned
- âœ… Assignment rules work
- âœ… Agents receive appropriate leads

---

### FR-7: Subscription & Monetization (Phase 2)

**Priority**: NICE TO HAVE (Phase 2)
**Deferred to Phase 2**

High-level requirements:
- Subscription tiers (Free, Basic, Pro, Enterprise)
- Payment integration (VNPay, MoMo)
- Featured listings
- Subscription management
- Billing & invoicing

---

## ğŸ”§ Non-Functional Requirements

### NFR-1: Performance

**NFR-1.1: Page Load Time**
- **Requirement**: All pages load within 2 seconds on 4G connection
- **Measurement**: Lighthouse performance score >90
- **Critical Pages**: Home, Search, Listing Detail

**NFR-1.2: API Response Time**
- **Requirement**: 95% of API requests complete within 200ms
- **Measurement**: APM monitoring (New Relic, Datadog)
- **Critical APIs**: Search, Listing Detail, Inquiry Submit

**NFR-1.3: AI Processing Time**
- **Requirement**:
  - AI Research: <2 minutes
  - AI Summary: <30 seconds
  - Trust Score: <5 seconds
- **Measurement**: Background job monitoring

**NFR-1.4: Concurrent Users**
- **Requirement**: Support 1,000 concurrent users without degradation
- **Measurement**: Load testing (k6, JMeter)

---

### NFR-2: Scalability

**NFR-2.1: Horizontal Scaling**
- **Requirement**: Backend can scale horizontally to handle growth
- **Implementation**: Stateless services, load balancer, Redis cache

**NFR-2.2: Database Scaling**
- **Requirement**: Database can handle 100,000+ listings
- **Implementation**: Proper indexing, query optimization, read replicas

**NFR-2.3: Storage Scaling**
- **Requirement**: Support 1TB+ of images
- **Implementation**: CDN (Cloudflare), object storage (S3)

---

### NFR-3: Security

**NFR-3.1: Authentication**
- **Requirement**: Secure JWT-based authentication
- **Implementation**:
  - Separate JWT secrets for public/internal users
  - Token expiry: 7 days
  - Refresh token mechanism
  - HTTPS only

**NFR-3.2: Authorization**
- **Requirement**: Role-based access control (RBAC)
- **Implementation**:
  - Public User role (limited permissions)
  - Sales Agent role (CRM access)
  - Admin role (full access)
  - Fine-grained permissions

**NFR-3.3: Data Protection**
- **Requirement**: Protect sensitive user data
- **Implementation**:
  - Encrypt passwords (bcrypt)
  - Mask phone numbers in public views
  - Hide email addresses
  - GDPR compliance

**NFR-3.4: Input Validation**
- **Requirement**: Validate all user inputs
- **Implementation**:
  - Server-side validation
  - Sanitize HTML inputs
  - Prevent SQL injection
  - Prevent XSS attacks

**NFR-3.5: Rate Limiting**
- **Requirement**: Prevent abuse
- **Implementation**:
  - API rate limiting (100 req/min per IP)
  - Inquiry rate limiting (5/hour anonymous, 20/day logged-in)
  - Login attempt limiting (5 attempts/15min)

---

### NFR-4: Reliability

**NFR-4.1: Uptime**
- **Requirement**: 99.5% uptime (43 hours downtime/year max)
- **Measurement**: Uptime monitoring (Pingdom, UptimeRobot)

**NFR-4.2: Error Handling**
- **Requirement**: Graceful error handling, no data loss
- **Implementation**:
  - Try-catch blocks
  - Error logging (Sentry)
  - User-friendly error messages
  - Automatic retries for transient failures

**NFR-4.3: Data Backup**
- **Requirement**: Daily automated backups, 30-day retention
- **Implementation**: PostgreSQL automated backups

**NFR-4.4: Disaster Recovery**
- **Requirement**: Restore from backup within 4 hours
- **Implementation**: Documented recovery procedures

---

### NFR-5: Usability

**NFR-5.1: Mobile Responsiveness**
- **Requirement**: Fully functional on mobile devices (iOS, Android)
- **Measurement**: Mobile-friendly test, responsive design

**NFR-5.2: Browser Compatibility**
- **Requirement**: Support modern browsers
- **Browsers**: Chrome, Safari, Firefox, Edge (last 2 versions)

**NFR-5.3: Accessibility**
- **Requirement**: WCAG 2.1 Level AA compliance (basic)
- **Implementation**:
  - Semantic HTML
  - Keyboard navigation
  - Screen reader support
  - Alt text for images

**NFR-5.4: User Experience**
- **Requirement**: Intuitive, easy to use
- **Measurement**: User satisfaction >4.2/5

---

### NFR-6: Maintainability

**NFR-6.1: Code Quality**
- **Requirement**: Clean, maintainable code
- **Implementation**:
  - TypeScript (type safety)
  - ESLint (linting)
  - Prettier (formatting)
  - Code reviews

**NFR-6.2: Documentation**
- **Requirement**: Comprehensive documentation
- **Deliverables**:
  - API documentation (Swagger)
  - Architecture diagrams
  - Setup guides
  - Deployment guides

**NFR-6.3: Testing**
- **Requirement**: High test coverage
- **Targets**:
  - Unit tests: >80% coverage
  - Integration tests: Critical paths
  - E2E tests: Key user flows

---

### NFR-7: AI-Specific Requirements

**NFR-7.1: AI Accuracy**
- **Requirement**: AI outputs accurate and reliable
- **Targets**:
  - Research accuracy: >90%
  - Spam detection: >95%
  - Trust score accuracy: >85%

**NFR-7.2: AI Cost Management**
- **Requirement**: Control AI API costs
- **Implementation**:
  - Cache AI responses (24h)
  - Rate limiting
  - Batch processing
  - Monitor usage

**NFR-7.3: AI Transparency**
- **Requirement**: Users understand AI is being used
- **Implementation**:
  - "Powered by AI" badges
  - Explain AI scores
  - Disclose data sources

---

## ğŸš€ Implementation Roadmap

### Phase 1: MVP (Month 1-3)

**Goal**: Launch functional marketplace vá»›i core AI features

**Month 1: Foundation**
- âœ… Setup development environment
- âœ… Database schema design
- âœ… Create new entities (PublicUser, PublicListing, Inquiry)
- âœ… Implement RBAC for public users
- âœ… Basic frontend views (browse, search, detail)

**Month 2: Core Features**
- âœ… User registration & authentication
- âœ… Post listing flow
- âœ… Inquiry system
- âœ… Admin approval workflow
- âœ… AI Research Agent (basic - 3 sources)
- âœ… Trust score calculation

**Month 3: AI & Polish**
- âœ… AI Summary generation
- âœ… Spam filter (rule-based)
- âœ… Lead conversion workflow
- âœ… Analytics dashboard
- âœ… Testing & bug fixes
- âœ… Beta launch (50 users)

**Deliverables**:
- Functional marketplace
- AI research & summary
- Trust scores
- Lead generation working
- 50 beta users, 200 listings

---

### Phase 2: Growth (Month 4-6)

**Goal**: Scale users, add monetization, enhance AI

**Month 4: Monetization**
- âœ… Subscription tiers
- âœ… Payment integration (VNPay, MoMo)
- âœ… Featured listings
- âœ… Seller dashboard

**Month 5: Enhanced AI**
- âœ… AI Consultation chatbot
- âœ… Advanced spam detection (ML)
- âœ… Research tá»« 5+ sources
- âœ… Price trend prediction

**Month 6: Scale & Optimize**
- âœ… Performance optimization
- âœ… SEO optimization
- âœ… Email/SMS notifications
- âœ… Mobile responsiveness improvements
- âœ… Public launch

**Deliverables**:
- 1,000 users, 2,000 listings
- Monetization active
- AI chatbot live
- 200 qualified leads/month

---

### Phase 3: Vision (Month 7-12)

**Goal**: Advanced features, mobile apps, market leadership

**Month 7-9: Advanced Features**
- âœ… Mobile apps (iOS/Android)
- âœ… Interactive map view
- âœ… Price history charts
- âœ… Virtual tours
- âœ… Comparison tool

**Month 10-12: Ecosystem**
- âœ… API for third-parties
- âœ… Partner integrations
- âœ… Affiliate program
- âœ… Market reports
- âœ… Predictive analytics

**Deliverables**:
- 5,000 users, 8,000 listings
- Mobile apps launched
- 500 qualified leads/month
- Market leadership trong Long ThÃ nh

---

## ğŸ“Š Success Tracking

### Key Performance Indicators (KPIs)

**Lead Generation** (Primary):
- Qualified leads per month
- Lead conversion rate
- Leads â†’ Deals ratio
- Average deal value from public leads

**User Growth**:
- New registrations per month
- Active users (MAU/DAU)
- User retention rate
- Churn rate

**Engagement**:
- Listings posted per month
- Inquiries sent per month
- Average session duration
- Pages per session

**AI Performance**:
- AI research accuracy
- Trust score accuracy
- Spam detection rate
- AI response time

**Financial**:
- Monthly recurring revenue (MRR)
- Average revenue per user (ARPU)
- Customer acquisition cost (CAC)
- Lifetime value (LTV)

### Monitoring & Reporting

**Daily**:
- New users
- New listings
- Inquiries
- Leads generated
- System health

**Weekly**:
- User growth trends
- Engagement metrics
- AI performance
- Revenue

**Monthly**:
- Comprehensive dashboard
- Executive report
- Goal vs actual
- Recommendations

---

## ğŸ“ Assumptions & Constraints

### Assumptions

1. **[ASSUMPTION]**: Twenty CRM's RBAC system cÃ³ thá»ƒ extend Ä‘á»ƒ support public user roles vá»›i granular permissions
2. **[ASSUMPTION]**: OpenAI GPT-4 API cÃ³ sufficient quota vÃ  pricing acceptable cho scale
3. **[ASSUMPTION]**: Web scraping batdongsan.com.vn, chá»£ tá»‘t legally permissible (check ToS)
4. **[ASSUMPTION]**: 10% lead conversion rate achievable vá»›i AI-qualified leads
5. **[ASSUMPTION]**: Users willing to verify phone/email for posting listings
6. **[ASSUMPTION]**: Long ThÃ nh market cÃ³ sufficient demand (5,000 users Year 1)
7. **[ASSUMPTION]**: Internal sales team cÃ³ capacity Ä‘á»ƒ handle 500 leads/month

### Constraints

**Technical**:
- Must use Twenty CRM architecture (NestJS, React, PostgreSQL)
- Must integrate vá»›i existing entities (Property, Deal, Commission)
- Cannot break existing internal CRM functionality
- AI API costs must stay <10M VNÄ/month

**Business**:
- Budget: 2.5B VNÄ Year 1
- Timeline: 6 months to MVP
- Team: 2 developers, 1 PM, 2 moderators
- Must break-even Year 1

**Legal**:
- Must comply vá»›i Vietnam real estate regulations
- Must protect user data (GDPR-like)
- Must have terms of service & privacy policy
- Must verify seller identity for high-value listings

**Operational**:
- Manual approval required (cannot fully automate)
- Customer support needed (email, phone)
- Content moderation needed (spam, scams)

---

## ğŸš¨ Risks & Mitigation

### Critical Risks

**Risk 1: Low User Adoption**
- **Probability**: MEDIUM (30%)
- **Impact**: CRITICAL (business fails)
- **Mitigation**:
  - Aggressive marketing (240M VNÄ Year 1)
  - Beta program vá»›i 50 brokers
  - Referral incentives
  - Free tier to attract users
  - Focus on quality over quantity

**Risk 2: AI Costs Too High**
- **Probability**: MEDIUM (30%)
- **Impact**: HIGH (unprofitable)
- **Mitigation**:
  - Cache AI responses (24h)
  - Batch processing
  - Rate limiting
  - Monitor usage closely
  - Fallback to rule-based if needed

**Risk 3: Lead Conversion Lower Than Expected**
- **Probability**: MEDIUM (30%)
- **Impact**: CRITICAL (revenue model fails)
- **Mitigation**:
  - Pilot program to validate conversion rate
  - Train sales team on public lead handling
  - Improve lead qualification algorithm
  - A/B test different approaches

**Risk 4: Web Scraping Legal Issues**
- **Probability**: LOW (20%)
- **Impact**: HIGH (feature removal)
- **Mitigation**:
  - Review ToS of target sites
  - Use public APIs where available
  - Implement respectful scraping (rate limits)
  - Have fallback plan (manual research)
  - Legal consultation

**Risk 5: Competition from batdongsan.com.vn**
- **Probability**: LOW (20%)
- **Impact**: HIGH (market share loss)
- **Mitigation**:
  - Move fast, establish presence first
  - Focus on Long ThÃ nh niche
  - Differentiate vá»›i AI features
  - Build local relationships
  - Quality over quantity

---

## ğŸ“ Appendices

### Appendix A: Glossary

- **Public User**: External user (buyer/seller/broker) khÃ´ng pháº£i company employee
- **Internal User**: Company employee (sales agent, admin, finance)
- **Qualified Lead**: Inquiry vá»›i verified contact + trust score >70%
- **Trust Score**: AI-generated score (0-100) indicating listing reliability
- **Spam Score**: AI-generated score (0-100) indicating spam likelihood
- **AI Research**: Automated process of verifying listing tá»« multiple sources
- **Lead Conversion**: Process of converting public inquiry thÃ nh internal deal

### Appendix B: Related Documents

- **Technical Specification**: `public-marketplace-specification.md`
- **Business Analysis**: `public-marketplace-business-analysis.md`
- **Original PRD**: `prd-v1.3.md` (internal CRM)
- **Architecture**: `architecture.md`

### Appendix C: Stakeholders

**Product Owner**: Luis (Company Owner)
**Product Manager**: John
**Development Team**: 2 developers
**Operations Team**: 2 content moderators, 2 customer support
**Sales Team**: Internal sales agents (users of converted leads)

### Appendix D: Approval & Sign-off

| Role | Name | Signature | Date |
|------|------|-----------|------|
| Product Owner | Luis | _________ | _____ |
| Product Manager | John | _________ | _____ |
| Tech Lead | _________ | _________ | _____ |
| Sales Manager | _________ | _________ | _____ |

---

## ğŸ¯ Next Steps

1. **Review & Approval**:
   - Luis reviews PRD
   - Stakeholders provide feedback
   - Revise PRD based on feedback
   - Get final sign-off

2. **Epic Breakdown**:
   - Run `workflow create-epics-and-stories`
   - Break requirements into implementable stories
   - Estimate effort
   - Prioritize stories

3. **Architecture Design**:
   - Run `workflow create-architecture`
   - Detail technical architecture
   - Design database schema
   - Plan API contracts

4. **UX Design** (if needed):
   - Run `workflow ux-design`
   - Create wireframes
   - Design mockups
   - User flow diagrams

5. **Implementation**:
   - Start Epic 1 (Foundation)
   - Agile sprints (2-week cycles)
   - Continuous testing
   - Beta launch Month 3

---

**Document Status**: âœ… **DRAFT - Ready for Review**
**Next Review Date**: After Luis approval
**Owner**: John (Product Manager)
**Last Updated**: 25/12/2025

---

**The Magic**: *"AI-Powered Trust + Unlimited Quality Leads"* ğŸŒŸ
